<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Retrieving Longitudinal and Repeating Structures • REDCapR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieving Longitudinal and Repeating Structures">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">REDCapR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OuhscBbmc/REDCapR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Retrieving Longitudinal and Repeating Structures</h1>
                        <h4 data-toc-skip class="author">Will
Beasley</h4>
            <address class="author_afil">
      Biomedical &amp; Behavior Methodology Core, OUHSC
Pediatrics<br><h4 data-toc-skip class="author">Stephan
Kaduke</h4>
            <address class="author_afil">
      CHOP<br><small class="dont-index">Source: <a href="https://github.com/OuhscBbmc/REDCapR/blob/main/vignettes/longitudinal-and-repeating.Rmd" class="external-link"><code>vignettes/longitudinal-and-repeating.Rmd</code></a></small>
      <div class="d-none name"><code>longitudinal-and-repeating.Rmd</code></div>
    </address>
</address>
</div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>This vignette pertains to reading REDCap records from a project that
(a) has longitudinal events or (b) has a repeating measure. The first
section conceptually discusses how REDCap stores complex structures. The
remaining sections describe how to best retrieve complex structures with
the <a href="https://chop-cgtinformatics.github.io/REDCapTidieR/" class="external-link">REDCapTidyieR</a>
and <a href="https://ouhscbbmc.github.io/REDCapR/">REDCapR</a>
packages.</p>
<ul>
<li>If you are new to R or REDCap, consider start with the <a href="https://ouhscbbmc.github.io/REDCapR/articles/workflow-read.html">Typical
REDCap Workflow for a Data Analyst</a> and <a href="https://ouhscbbmc.github.io/REDCapR/articles/BasicREDCapROperations.html">Basic
REDCapR Operations</a> vignettes and then return to this document.</li>
<li>If you are reading from a <em>simple</em> project, just call
REDCapR’s <a href="https://ouhscbbmc.github.io/REDCapR/reference/redcap_read.html"><code>redcap_read()</code></a>.</li>
<li>If you want to perform some other operation (such as writing records
to REDCap), review the <a href="https://ouhscbbmc.github.io/REDCapR/reference/index.html">Reference
of REDCapR functions</a> to see what is currently available.</li>
</ul>
<p>If your REDCap project is longitudinal or contains repeating
measures, a single call to the API (or a single export through the
browser) will return a dataset that is not readily analyzed. Instead,
the dataset will resemble Table 5. This isn’t because of a software bug,
but because you haven’t told the software how you would like the data
structured. There isn’t a good way to jam this multidimensional space
into a rectangle of points. Our advice for querying REDCap is the same
as querying any database system: request separate datasets that have a
natural “grain” and assemble them as to fit your analyses.</p>
</div>
<div class="section level2">
<h2 id="illustration-of-how-data-points-are-structured">Illustration of How Data Points are Structured<a class="anchor" aria-label="anchor" href="#illustration-of-how-data-points-are-structured"></a>
</h2>
<div class="section level3">
<h3 id="possible-table-structures">Possible Table Structures<a class="anchor" aria-label="anchor" href="#possible-table-structures"></a>
</h3>
<p>Suppose you have two patients (<em>i.e.</em>, “1” and “2”) with three
intake variables (<em>i.e.</em>, <code>height</code>,
<code>weight</code>, and <code>bmi</code>). If you record this on a
piece of paper, it would probably look like Table 1. The table’s
<em>grain</em> is “patient”, because each row represents a distinct
patient. Understanding the grain of each structure below will help you
understand how the structures are re-expressions of the same set of
observations.</p>
<div class="section level4">
<h4 id="table-1-patient-grain">Table 1: patient grain<a class="anchor" aria-label="anchor" href="#table-1-patient-grain"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th align="center">pt<br>id</th>
<th align="center">height</th>
<th align="center">weight</th>
<th align="center">bmi</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1.0</td>
<td align="center">11.0</td>
<td align="center">111.0</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">2.0</td>
<td align="center">22.0</td>
<td align="center">222.0</td>
</tr>
</tbody>
</table>
<p>This patient-grain structure is how the data points are most
comfortably inputted by humans into REDCap, and it is the default when
exported through the browser and API. However it is stored differently
by REDCap’s internal database.</p>
<p>REDCap’s flexibility is a driver of its success. Once a research team
learns REDCap, it can reuse the knowledge to capture anything from
leukemia to lunch orders. But to achieve this flexibility in the world
of REDCap and EMRs, data are stored along the observation grain. In
computer science, this is commonly called an EAV structure (which stands
for entity-attribute-value). The patient’s ID is the entity, the
variable type is the attribute, and the observed point is the value. It
can also be thought of as a “key-value store” nested within a patient
(where “key” is a synonym of “attribute”). Notice that the two wider
rows have morphed into six skinnier rows –one row per observation. If
you are a curious database administrator, peek at the the structure and
rows of the <code>redcap_data</code> table. It is the most important
table in the database.</p>
</div>
<div class="section level4">
<h4 id="table-2-observation-grain-for-intake-instrument">Table 2: observation grain for <code>intake</code> instrument<a class="anchor" aria-label="anchor" href="#table-2-observation-grain-for-intake-instrument"></a>
</h4>
<p>REDCap and EMR databases store observations in their underlying
table. This table is a simplification of the <code>redcap_data</code>
table, which is the heart of the REDCap’s internal database.</p>
<table class="table">
<thead><tr class="header">
<th align="center">pt<br>id</th>
<th align="left">key</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="left">height</td>
<td align="right">1.0</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">weight</td>
<td align="right">11.0</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="left">bmi</td>
<td align="right">111.0</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">height</td>
<td align="right">2.0</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">weight</td>
<td align="right">22.0</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">bmi</td>
<td align="right">222.0</td>
</tr>
</tbody>
</table>
<p>If the investigation gains a longitudinal or repeating component, it
becomes necessary to include the dimension of time. Suppose the protocol
specifies five time points; the blood pressure instrument is captured at
times 1, 2, &amp; 3 while the laboratory instrument is captured at times
1 &amp; 2. If you record this stage on paper, it will likely resemble
Tables 3a &amp; 3b: one for vitals and one for labs.</p>
</div>
<div class="section level4">
<h4 id="table-3a-patient-time-grain-for-blood_pressure-instrument">Table 3a: patient-time grain for <code>blood_pressure</code>
instrument<a class="anchor" aria-label="anchor" href="#table-3a-patient-time-grain-for-blood_pressure-instrument"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th align="center">pt<br>id</th>
<th align="center">time</th>
<th align="center">sbp</th>
<th align="center">dbp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1.1</td>
<td align="center">11.1</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">2</td>
<td align="center">1.2</td>
<td align="center">11.2</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="center">3</td>
<td align="center">1.3</td>
<td align="center">11.3</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">2.1</td>
<td align="center">22.1</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">2</td>
<td align="center">2.2</td>
<td align="center">22.2</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">3</td>
<td align="center">2.3</td>
<td align="center">22.3</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="table-3b-patient-time-grain-for-laboratory-instrument">Table 3b: patient-time grain for <code>laboratory</code>
instrument<a class="anchor" aria-label="anchor" href="#table-3b-patient-time-grain-for-laboratory-instrument"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th align="center">pt<br>id</th>
<th align="center">time</th>
<th align="center">lab</th>
<th align="center">dose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">aa1</td>
<td align="center">1.1 mg</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">2</td>
<td align="center">aa2</td>
<td align="center">1.2 mg</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">bb1</td>
<td align="center">2.1 mg</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">2</td>
<td align="center">bb2</td>
<td align="center">2.2 mg</td>
</tr>
</tbody>
</table>
<p>When these measurements are added to REDCap’s observation table, it
resembles Table 4. Two new columns are required to uniquely distinguish
the instrument and its ordinal position. Notice the first six rows are
copied from Table 2; they have empty values for the repeating
structure.</p>
</div>
<div class="section level4">
<h4 id="table-4-observation-grain-for-intake-blood_pressure-and-laboratory-instruments">Table 4: observation grain for <code>intake</code>,
<code>blood_pressure</code>, and <code>laboratory</code>
instruments<a class="anchor" aria-label="anchor" href="#table-4-observation-grain-for-intake-blood_pressure-and-laboratory-instruments"></a>
</h4>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="33%">
<col width="30%">
<col width="10%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="center">pt<br>id</th>
<th align="left">repeat<br>instrument</th>
<th align="center">repeat<br>instance</th>
<th align="left">key</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="left">–</td>
<td align="center">–</td>
<td align="left">height</td>
<td align="right">1.0</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">–</td>
<td align="center">–</td>
<td align="left">weight</td>
<td align="right">11.0</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="left">–</td>
<td align="center">–</td>
<td align="left">bmi</td>
<td align="right">111.0</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">–</td>
<td align="center">–</td>
<td align="left">height</td>
<td align="right">2.0</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">–</td>
<td align="center">–</td>
<td align="left">weight</td>
<td align="right">22.0</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">–</td>
<td align="center">–</td>
<td align="left">bmi</td>
<td align="right">222.0</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="left">blood_pressure</td>
<td align="center">1</td>
<td align="left">sbp</td>
<td align="right">1.1</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">blood_pressure</td>
<td align="center">1</td>
<td align="left">dbp</td>
<td align="right">11.1</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="left">blood_pressure</td>
<td align="center">2</td>
<td align="left">sbp</td>
<td align="right">1.2</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">blood_pressure</td>
<td align="center">2</td>
<td align="left">dbp</td>
<td align="right">11.2</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="left">blood_pressure</td>
<td align="center">3</td>
<td align="left">sbp</td>
<td align="right">1.3</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">blood_pressure</td>
<td align="center">3</td>
<td align="left">dbp</td>
<td align="right">11.3</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="left">laboratory</td>
<td align="center">1</td>
<td align="left">lab</td>
<td align="right">aa1</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">laboratory</td>
<td align="center">1</td>
<td align="left">conc</td>
<td align="right">1.1 ppm</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="left">laboratory</td>
<td align="center">2</td>
<td align="left">lab</td>
<td align="right">aa2</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">laboratory</td>
<td align="center">2</td>
<td align="left">conc</td>
<td align="right">1.2 ppm</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">blood_pressure</td>
<td align="center">1</td>
<td align="left">sbp</td>
<td align="right">2.1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">blood_pressure</td>
<td align="center">1</td>
<td align="left">dbp</td>
<td align="right">22.1</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">blood_pressure</td>
<td align="center">2</td>
<td align="left">sbp</td>
<td align="right">2.2</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">blood_pressure</td>
<td align="center">2</td>
<td align="left">dbp</td>
<td align="right">22.2</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">blood_pressure</td>
<td align="center">3</td>
<td align="left">sbp</td>
<td align="right">2.3</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">blood_pressure</td>
<td align="center">3</td>
<td align="left">dbp</td>
<td align="right">22.3</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">laboratory</td>
<td align="center">1</td>
<td align="left">lab</td>
<td align="right">bb1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">laboratory</td>
<td align="center">1</td>
<td align="left">conc</td>
<td align="right">2.1 ppm</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">laboratory</td>
<td align="center">2</td>
<td align="left">lab</td>
<td align="right">bb2</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">laboratory</td>
<td align="center">2</td>
<td align="left">conc</td>
<td align="right">2.2 ppm</td>
</tr>
</tbody>
</table>
<p>As mentioned above, there isn’t a universally good way to coerce
Tables 1, 3a, and 3b into a single rectangle because the rows represent
different things. Or from REDCap’s perspective, there’s not a good
transformation of <code>redcap_data</code> (<em>i.e.</em>, Table 4) that
is appropriate for most statistical programs.</p>
<p>When forced to combine the different entities, the best option is
probably Table 5. We call this a “block dataset”, borrowing from linear
algebra’s <a href="https://mathworld.wolfram.com/BlockMatrix.html" class="external-link">block
matrix</a> term. You can see the mishmash of tables masquerading as a
unified dataset. The rows lack the conceptual coherency of Tables 1, 3a,
&amp; 3b.</p>
</div>
<div class="section level4">
<h4 id="table-5-mishmashed-grain">Table 5: mishmashed grain<a class="anchor" aria-label="anchor" href="#table-5-mishmashed-grain"></a>
</h4>
<table style="width:100%;" class="table">
<colgroup>
<col width="9%">
<col width="24%">
<col width="21%">
<col width="7%">
<col width="7%">
<col width="6%">
<col width="4%">
<col width="4%">
<col width="4%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="center">pt<br>id</th>
<th align="left">repeat<br>instrument</th>
<th align="center">repeat<br>instance</th>
<th align="center">height</th>
<th align="center">weight</th>
<th align="center">bmi</th>
<th align="center">sbp</th>
<th align="center">dbp</th>
<th align="center">lab</th>
<th align="center">conc</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="left">–</td>
<td align="center">–</td>
<td align="center">1.0</td>
<td align="center">11.0</td>
<td align="center">111.0</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">blood_pressure</td>
<td align="center">1</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">1.1</td>
<td align="center">11.1</td>
<td align="center">–</td>
<td align="center">–</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="left">blood_pressure</td>
<td align="center">2</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">1.2</td>
<td align="center">11.2</td>
<td align="center">–</td>
<td align="center">–</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">blood_pressure</td>
<td align="center">3</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">1.3</td>
<td align="center">11.3</td>
<td align="center">–</td>
<td align="center">–</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="left">laboratory</td>
<td align="center">1</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">aa1</td>
<td align="center">1.1 ppm</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="left">laboratory</td>
<td align="center">2</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">aa2</td>
<td align="center">1.2 ppm</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">–</td>
<td align="center">–</td>
<td align="center">2.0</td>
<td align="center">22.0</td>
<td align="center">222.0</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">blood_pressure</td>
<td align="center">1</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">2.1</td>
<td align="center">22.1</td>
<td align="center">–</td>
<td align="center">–</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">blood_pressure</td>
<td align="center">2</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">2.2</td>
<td align="center">22.2</td>
<td align="center">–</td>
<td align="center">–</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">blood_pressure</td>
<td align="center">3</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">2.3</td>
<td align="center">22.3</td>
<td align="center">–</td>
<td align="center">–</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="left">laboratory</td>
<td align="center">1</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">bb1</td>
<td align="center">2.1 ppm</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="left">laboratory</td>
<td align="center">2</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">–</td>
<td align="center">bb2</td>
<td align="center">2.2 ppm</td>
</tr>
</tbody>
</table>
<p>A block dataset is not inherently bad. After all, Table 5 can be
unambiguously transformed to and from Table 4.</p>
<p>Table 5’s primary limitation is that a block dataset is not
understood by analysis software used in conventional medical research.
At best, the dataset always will require additional preparation. At
worst, the analyst will model the rows inappropriately, which will
produce misleading conclusions.</p>
<p>Table 5’s secondary limitation is inefficiency. The empty cells
aren’t computationally free. Every cell must be queried from the
database and concatenated in REDCap’s web server in order to return
Table 5 in the plain-text csv, json, or xml format. In our simple
example, more than half of the block dataset’s cells are wasted. The
emptiness frequently exceeds 90% in real-world REDCap projects (because
they tend to have many more variables and repeating instances). The
emptiness always exceeds 99.9% in real-world EMRs.</p>
<p>For this reason, REDCap and EMR design their observation table to
resemble the computational structure of a <a href="https://en.wikipedia.org/wiki/Sparse_matrix" class="external-link">sparse matrix</a>.
(The only important difference is that REDCap’s unspecified cells are
interpreted as null/empty, while a sparse matrix’s unspecified cells are
interpreted as zero.)</p>
<blockquote>
<p>In the case of a sparse matrix, substantial memory requirement
reductions can be realized by storing only the non-zero entries.
Depending on the number and distribution of the non-zero entries,
different data structures can be used and yield huge savings in memory
when compared to the basic approach. The trade-off is that accessing the
individual elements becomes more complex and additional structures are
needed to be able to recover the original matrix unambiguously. (source:
<a href="https://en.wikipedia.org/wiki/Sparse_matrix#Storage" class="external-link">Wikipedia:
Sparse matrix - storage</a>)</p>
</blockquote>
</div>
</div>
<div class="section level3">
<h3 id="terminology">Terminology<a class="anchor" aria-label="anchor" href="#terminology"></a>
</h3>
<div class="section level4">
<h4 id="observation">observation<a class="anchor" aria-label="anchor" href="#observation"></a>
</h4>
<p>The term “observation” in the world of <a href="https://ohdsi.github.io/CommonDataModel/cdm60.html#OBSERVATION" class="external-link">medical
databases</a> has a different and more granular meaning than it does in
the <a href="https://r4ds.had.co.nz/tidy-data.html#tidy-data-1" class="external-link">tidyverse
literature</a>. In REDCap and medical databases, an observation is
typically a single point (such as a heart rate or systolic blood
pressure) with contextual variables (such as the the associated date,
unit, visit ID, and patient ID); see Tables 2 and 4 above. In the
tidyverse publications, an observation is roughly equivalent to a REDCap
instrument (which is a collection of associated values); see Tables 1,
3a, and 3b.</p>
<p>(We use the medical terminology in this vignette. We’d love to hear
if someone has another term that’s unambiguous.)</p>
<table class="table">
<thead><tr class="header">
<th align="left">Concept</th>
<th align="left">REDCap &amp; Medical World</th>
<th align="left">Tidyverse Literature</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A single measured point</td>
<td align="left">observation</td>
<td align="left">value</td>
</tr>
<tr class="even">
<td align="left">A collection of associated points</td>
<td align="left">instrument</td>
<td align="left">observation</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="retrieving-from-redcap">Retrieving from REDCap<a class="anchor" aria-label="anchor" href="#retrieving-from-redcap"></a>
</h2>
<p>Many new REDCap users will submit a single API call and
unintentionally obtain something like Table 5; they then try to extract
something resembling Tables 1, 3a, &amp; 3b. Although this can be
successful, we strongly discourage it. The code is difficult to maintain
and is not portable to REDCap projects with different instruments. (The
code is really slow and ugly too.)</p>
<p>Our advice is to start before Table 5 is assembled –retrieve the
information in a better way. Like other database systems, request the
three tables separately from the server and then combine them on your
desktop to fit your analyses if necessary.</p>
<p>Two approaches are appropriate for most scenarios:</p>
<ol style="list-style-type: decimal">
<li>multiple calls to REDCapR’s <a href="https://ouhscbbmc.github.io/REDCapR/reference/redcap_read.html"><code>redcap_read()</code></a>,
or</li>
<li>a single call to REDCapTidieR’s <a href="https://chop-cgtinformatics.github.io/REDCapTidieR/reference/read_redcap_tidy.html" class="external-link"><code>redcap_read_tidy()</code></a>.</li>
</ol>
<p>The code in the vignette requires the magrittr package for the
<code>%&gt;%</code> (alternatively you can use <code>|&gt;</code> if
you’re using R 4.0.2 or later).</p>
<p>The vignette uses these credentials to retrieve the practice/fake
dataset. <strong>This is not appropriate for datasets containing PHI or
other sensitive information.</strong> Please see <a href="https://ouhscbbmc.github.io/REDCapR/articles/workflow-read.html#part-2---retrieve-protected-token">Part
2 - Retrieve Protected Token</a> of the <a href="https://ouhscbbmc.github.io/REDCapR/articles/workflow-read.html">Typical
REDCap Workflow for a Data Analyst</a> vignette for secure
approaches.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Support pipes</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Retrieve token</span></span>
<span><span class="va">path_credential</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"misc/dev-2.credentials"</span>, package <span class="op">=</span> <span class="st">"REDCapR"</span><span class="op">)</span></span>
<span><span class="va">credential</span>  <span class="op">&lt;-</span> <span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/retrieve_credential.html">retrieve_credential_local</a></span><span class="op">(</span></span>
<span>  path_credential <span class="op">=</span> <span class="va">path_credential</span>,</span>
<span>  project_id      <span class="op">=</span> <span class="fl">62</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="one-redcapr-call-for-each-table">One REDCapR Call for Each Table<a class="anchor" aria-label="anchor" href="#one-redcapr-call-for-each-table"></a>
</h3>
<p>The tidy datasets represented in Tables 1, 3a, and 3b can be obtained
by calling REDCapR three times –one call per table. Using the
<code>forms</code> parameter, pass “intake” to get Table 1,
“blood_pressure” to get Table 3a, and “laboratory” to get Table 3b.</p>
<p>Although it is not required, we recommend specifying a <a href="https://readr.tidyverse.org/reference/cols.html" class="external-link"><code>readr::cols()</code></a>
object to ensure the desired variable data types.</p>
<div class="section level4">
<h4 id="retrieve-patient-level-table-corresponding-to-table-1">Retrieve patient-level table (corresponding to Table 1)<a class="anchor" aria-label="anchor" href="#retrieve-patient-level-table-corresponding-to-table-1"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">col_types_intake</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols_only</a></span><span class="op">(</span></span>
<span>    record_id                 <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    height                    <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    weight                    <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    bmi                       <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_double</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ds_intake</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>    redcap_uri  <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>, <span class="co"># From the previous code snippet.</span></span>
<span>    token       <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span>,</span>
<span>    forms       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"intake"</span><span class="op">)</span>,</span>
<span>    col_types   <span class="op">=</span> <span class="va">col_types_intake</span>,</span>
<span>    verbose     <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span><span class="va">ds_intake</span></span></code></pre></div>
<table class="table table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
record<br>id
</th>
<th style="text-align:right;">
height
</th>
<th style="text-align:right;">
weight
</th>
<th style="text-align:right;">
bmi
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
111
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
222
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="retrieve-patient-time-level-tables-corresponding-to-tables-3a-3b">Retrieve patient-time-level tables (corresponding to Tables 3a &amp;
3b)<a class="anchor" aria-label="anchor" href="#retrieve-patient-time-level-tables-corresponding-to-tables-3a-3b"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">col_types_blood_pressure</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols</a></span><span class="op">(</span></span>
<span>    record_id                 <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    redcap_repeat_instrument  <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    redcap_repeat_instance    <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    sbp                       <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    dbp                       <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    blood_pressure_complete   <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_integer</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ds_blood_pressure</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>    redcap_uri  <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>,</span>
<span>    token       <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span>,</span>
<span>    forms       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blood_pressure"</span><span class="op">)</span>,</span>
<span>    col_types   <span class="op">=</span> <span class="va">col_types_blood_pressure</span>,</span>
<span>    verbose     <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span><span class="va">ds_blood_pressure</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">redcap_repeat_instrument</span><span class="op">)</span></span></code></pre></div>
<table class="table table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
record<br>id
</th>
<th style="text-align:left;">
redcap<br>repeat<br>instrument
</th>
<th style="text-align:right;">
redcap<br>repeat<br>instance
</th>
<th style="text-align:right;">
sbp
</th>
<th style="text-align:right;">
dbp
</th>
<th style="text-align:right;">
blood<br>pressure<br>complete
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
11.1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.2
</td>
<td style="text-align:right;">
11.2
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
11.3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.1
</td>
<td style="text-align:right;">
22.1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.2
</td>
<td style="text-align:right;">
22.2
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:right;">
22.3
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">col_types_laboratory</span>  <span class="op">&lt;-</span></span>
<span>  <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols</a></span><span class="op">(</span></span>
<span>    record_id                 <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    redcap_repeat_instrument  <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    redcap_repeat_instance    <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    lab                       <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    conc                      <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    laboratory_complete       <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_integer</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ds_laboratory</span>  <span class="op">&lt;-</span></span>
<span>  <span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>    redcap_uri  <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>,</span>
<span>    token       <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span>,</span>
<span>    forms       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"laboratory"</span><span class="op">)</span>,</span>
<span>    col_types   <span class="op">=</span> <span class="va">col_types_laboratory</span>,</span>
<span>    verbose     <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span><span class="va">ds_laboratory</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">redcap_repeat_instrument</span><span class="op">)</span></span></code></pre></div>
<table class="table table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
record<br>id
</th>
<th style="text-align:left;">
redcap<br>repeat<br>instrument
</th>
<th style="text-align:right;">
redcap<br>repeat<br>instance
</th>
<th style="text-align:left;">
lab
</th>
<th style="text-align:left;">
conc
</th>
<th style="text-align:right;">
laboratory<br>complete
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
laboratory
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
aa1
</td>
<td style="text-align:left;">
1.1 ppm
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
laboratory
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
aa2
</td>
<td style="text-align:left;">
1.2 ppm
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
laboratory
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
bb1
</td>
<td style="text-align:left;">
2.1 ppm
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
laboratory
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
bb2
</td>
<td style="text-align:left;">
2.2 ppm
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="retrieve-block-tables-corresponding-to-table-5">Retrieve block tables (corresponding to Table 5)<a class="anchor" aria-label="anchor" href="#retrieve-block-tables-corresponding-to-table-5"></a>
</h4>
<p>If for some reason you need the block dataset through the API, one
call will retrieve it.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ds_block</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>    redcap_uri  <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>,</span>
<span>    token       <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span>,</span>
<span>    col_types   <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols</a></span><span class="op">(</span>.default <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_character</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    verbose     <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span><span class="va">ds_block</span></span></code></pre></div>
<table class="table table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
record<br>id
</th>
<th style="text-align:left;">
redcap<br>repeat<br>instrument
</th>
<th style="text-align:left;">
redcap<br>repeat<br>instance
</th>
<th style="text-align:left;">
height
</th>
<th style="text-align:left;">
weight
</th>
<th style="text-align:left;">
bmi
</th>
<th style="text-align:left;">
intake<br>complete
</th>
<th style="text-align:left;">
sbp
</th>
<th style="text-align:left;">
dbp
</th>
<th style="text-align:left;">
blood<br>pressure<br>complete
</th>
<th style="text-align:left;">
lab
</th>
<th style="text-align:left;">
conc
</th>
<th style="text-align:left;">
laboratory<br>complete
</th>
<th style="text-align:left;">
image<br>profile
</th>
<th style="text-align:left;">
image<br>complete
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
1.0
</td>
<td style="text-align:left;">
11.0
</td>
<td style="text-align:left;">
111.0
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
1.1
</td>
<td style="text-align:left;">
11.1
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
11.2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
1.3
</td>
<td style="text-align:left;">
11.3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
laboratory
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
aa1
</td>
<td style="text-align:left;">
1.1 ppm
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
laboratory
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
aa2
</td>
<td style="text-align:left;">
1.2 ppm
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
image
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
levon-and-barry.jpg
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
image
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
mugshot-1.jpg
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2.0
</td>
<td style="text-align:left;">
22.0
</td>
<td style="text-align:left;">
222.0
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2.1
</td>
<td style="text-align:left;">
22.1
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2.2
</td>
<td style="text-align:left;">
22.2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
blood_pressure
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2.3
</td>
<td style="text-align:left;">
22.3
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
laboratory
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
bb1
</td>
<td style="text-align:left;">
2.1 ppm
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
laboratory
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
bb2
</td>
<td style="text-align:left;">
2.2 ppm
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
image
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
mugshot-2.jpg
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
image
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
mugshot-3.jpg
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
image
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
mugshot-4.jpg
</td>
<td style="text-align:left;">
0
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="one-redcaptidier-call-for-all-tables">One REDCapTidieR Call for All Tables<a class="anchor" aria-label="anchor" href="#one-redcaptidier-call-for-all-tables"></a>
</h3>
<p><a href="https://chop-cgtinformatics.github.io/REDCapTidieR/" class="external-link">REDCapTidieR</a>’s
initial motivation is to facilitate longitudinal analyses and promote <a href="https://r4ds.hadley.nz/data-tidy.html" class="external-link">tidy</a> data hygiene.</p>
<p>{Stephan Kadauke &amp; Richard Hanna, please represent your package
as you wish. Tell me if I’ve positioned it differently than you would
have.}</p>
</div>
<div class="section level3">
<h3 id="choosing-between-the-approaches">Choosing between the Approaches<a class="anchor" aria-label="anchor" href="#choosing-between-the-approaches"></a>
</h3>
<p>When retrieving data from REDCap, we recommend calling <a href="https://chop-cgtinformatics.github.io/REDCapTidieR/" class="external-link">REDCapTidieR</a>
in many scenarios, such as:</p>
<ul>
<li>you are new to managing or analyzing data with R, or</li>
<li>your analyses will require most of the dataset’s rows or columns,
or</li>
<li>you’d benefit from some of the auxiliary information in <a href="https://chop-cgtinformatics.github.io/REDCapTidieR/articles/REDCapTidieR.html#tidying-redcap-exports" class="external-link">REDCapTidieR’s
supertibble</a>, such as the instrument’s structure.
<!--Future version may provide more information, like the column and row count of each table.-->
</li>
</ul>
<p>However we recommend calling <a href="https://ouhscbbmc.github.io/REDCapR/">REDCapR</a> in other
scenarios. It could be worth calling REDCapR multiple times if:</p>
<ul>
<li>you are performing some operation other than retrieving/reading data
from REDCap,</li>
<li>you are comfortable with managing and analyzing data with R, or</li>
<li>your analyses require only a fraction of the data (such as (a) you
need only the first event, or (b) the analyses don’t involve most of the
instruments), or</li>
<li>you want to specify the variables’ data types with <a href="https://readr.tidyverse.org/reference/cols.html" class="external-link"><code>readr::cols()</code></a>.</li>
</ul>
<p>If in doubt, start with REDCapTidieR. Escalate to REDCapR if your
download time is too long and might be decreased by reducing the
information retrieved from the server and transported across the
network.</p>
<p>And of course many scenarios are solved best with a combination of
both packages, such as (a) <a href="https://ouhscbbmc.github.io/REDCapR/">REDCapR</a> populates the
initial demographics in REDCap, (b) research staff enter measures
collected from patients over time, (c) <a href="https://chop-cgtinformatics.github.io/REDCapTidieR/" class="external-link">REDCapTidieR</a>
retrieves the complete longitudinal dataset, (d) <a href="https://dplyr.tidyverse.org/" class="external-link">dplyr</a> joins the tibbles, and
finally (e) <a href="https://cran.r-project.org/package=lme4/vignettes/lmer.pdf" class="external-link">lme4</a>
tests hypotheses involving <a href="https://datascienceplus.com/analysing-longitudinal-data-multilevel-growth-models-i/" class="external-link">patient
trajectories</a> over time.</p>
</div>
<div class="section level3">
<h3 id="escalating-to-redcapr">Escalating to REDCapR<a class="anchor" aria-label="anchor" href="#escalating-to-redcapr"></a>
</h3>
<p>Even if you think you’ll need REDCapR’s low-level control, consider
starting with REDCapTidieR anyway. …particularly if you are unsure how
to specify the grain of each table. The structure of REDCapTidieR’s
tables easily compatible with conventional analyses. If you need the
performance of REDCapR but are unsure how the tables should look, simply
execute something like
<code>REDCapTidieR::redcap_read_tidy(url, project_token)</code> and
study its output. Then try to mimic it exactly with
<code><a href="../reference/redcap_read.html">REDCapR::redcap_read()</a></code> calls.</p>
<p>Finally, cull unwanted cells using the parameters of
<code><a href="../reference/redcap_read.html">REDCapR::redcap_read()</a></code>. These data points will not even
leave the REDCap instance, which will improve performance. Some possible
strategies include passing <a href="https://ouhscbbmc.github.io/REDCapR/reference/redcap_read.html#arguments">arguments</a>
to</p>
<ul>
<li>
<code>forms</code>: this will retrieve only the specified
instruments/forms. Beginners should start here. It is easy to
conceptualize and usually has a big increase in speed for just a little
development work.</li>
<li>
<code>events</code>: this will retrieve only the desired events
within a longitudinal project. For instance if the analyses involve only
the “intake” and “follow up #1” events, leave follow ups #2, #3, and #4
on the server.</li>
<li>
<code>fields</code>: this is more granular than <code>forms</code>.
It can be combined with calls to <code>forms</code>, such as passing
<code>"bmi"</code> to fields and
<code>c("blood_pressure", "laboratory")</code> to forms.</li>
<li>
<code>records</code>: in the example scenario, this will pluck
individual patients and their associated events and repeating instances.
To be useful in research, it’s usually combined with other REDCapR
calls. See the <a href="https://ouhscbbmc.github.io/REDCapR/articles/BasicREDCapROperations.html#read-a-subset-of-records-conditioned-on-the-values-in-some-variables">Read
a subset of records, conditioned on the values in some variables</a>
section of REDCapR’s <a href="https://ouhscbbmc.github.io/REDCapR/articles/BasicREDCapROperations.html">Basic
REDCapR Operations</a> vignette.</li>
<li>
<code>filter_logic</code>: this will leverage the observation values
to limit the rows returned. Because the underlying table does not index
the obs values, this will be less computationally efficient than the
options above.</li>
<li>
<code>datetime_range_begin</code> &amp;
<code>datetime_range_end</code>: this will return only the records that
have been created or modified during the specified window.</li>
</ul>
<p>Note that the efficiency gain from moving from the block dataset to
REDCapTidieR is different than the gain from moving from REDCapTidieR to
REDCapR. When moving to from Table 5 to a <a href="https://chop-cgtinformatics.github.io/REDCapTidieR/articles/glossary.html#supertibble" class="external-link">REDCapTidieR
Supertibble</a>, you are eliminating empty cells that will never contain
worthwhile data. When moving from a REDCapTidieR Supertibble call to a
collection of REDCapR calls, you are eliminating cells that contain
data, but may not be relevant to your analysis (such as a patient’s name
or the time a lab specimen was collected). {This paragraph needs
work.}</p>
</div>
</div>
<div class="section level2">
<h2 id="advanced">Advanced<a class="anchor" aria-label="anchor" href="#advanced"></a>
</h2>
<div class="section level3">
<h3 id="longitudinal">Longitudinal<a class="anchor" aria-label="anchor" href="#longitudinal"></a>
</h3>
<p>{TODO: Generalize the argument to longitudinal events}</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="4%">
<col width="25%">
<col width="23%">
<col width="8%">
<col width="8%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th><code>pt</code></th>
<th align="center">
<code>repeat</code><br><code>instrument</code>
</th>
<th align="right">
<code>repeat</code><br><code>instance</code>
</th>
<th align="right"><code>height</code></th>
<th align="right"><code>weight</code></th>
<th align="right"><code>bmi</code></th>
<th align="right"><code>sbp</code></th>
<th align="right"><code>dbp</code></th>
<th align="right"><code>lab</code></th>
<th align="right"><code>conc</code></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td align="center">–</td>
<td align="right">–</td>
<td align="right">1.0</td>
<td align="right">11.0</td>
<td align="right">111.0</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
</tr>
<tr class="even">
<td>1</td>
<td align="center">blood_pressure</td>
<td align="right">1</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">1.1</td>
<td align="right">11.1</td>
<td align="right">–</td>
<td align="right">–</td>
</tr>
<tr class="odd">
<td>1</td>
<td align="center">blood_pressure</td>
<td align="right">2</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">1.2</td>
<td align="right">11.2</td>
<td align="right">–</td>
<td align="right">–</td>
</tr>
<tr class="even">
<td>1</td>
<td align="center">blood_pressure</td>
<td align="right">3</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">1.3</td>
<td align="right">11.3</td>
<td align="right">–</td>
<td align="right">–</td>
</tr>
<tr class="odd">
<td>1</td>
<td align="center">laboratory</td>
<td align="right">3</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">aa3</td>
<td align="right">1.3 ppm</td>
</tr>
<tr class="even">
<td>1</td>
<td align="center">laboratory</td>
<td align="right">4</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">aa4</td>
<td align="right">1.4 ppm</td>
</tr>
<tr class="odd">
<td>2</td>
<td align="center">–</td>
<td align="right">–</td>
<td align="right">2.0</td>
<td align="right">22.0</td>
<td align="right">222.0</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
</tr>
<tr class="even">
<td>2</td>
<td align="center">blood_pressure</td>
<td align="right">1</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">2.1</td>
<td align="right">22.1</td>
<td align="right">–</td>
<td align="right">–</td>
</tr>
<tr class="odd">
<td>2</td>
<td align="center">blood_pressure</td>
<td align="right">2</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">2.2</td>
<td align="right">22.2</td>
<td align="right">–</td>
<td align="right">–</td>
</tr>
<tr class="even">
<td>2</td>
<td align="center">blood_pressure</td>
<td align="right">3</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">2.3</td>
<td align="right">22.3</td>
<td align="right">–</td>
<td align="right">–</td>
</tr>
<tr class="odd">
<td>2</td>
<td align="center">laboratory</td>
<td align="right">3</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">bb3</td>
<td align="right">2.3 ppm</td>
</tr>
<tr class="even">
<td>2</td>
<td align="center">laboratory</td>
<td align="right">4</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">bb4</td>
<td align="right">2.4 ppm</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="caching-results-to-improve-performance">Caching Results to Improve Performance<a class="anchor" aria-label="anchor" href="#caching-results-to-improve-performance"></a>
</h3>
<p>If escalating to REDCapR didn’t decrease the duration enough,
consider the strategy of calling REDCap only once per day (with either
package) and saving the results to a secured disk. This will be
efficient when the analyses require a <em>large</em> dataset, but not a
<em>real-time</em> dataset.</p>
<p>In many retrospective projects, multiple analyses during the day can
reuse the same dataset retrieved the night before (with a function like
<a href="https://readr.tidyverse.org/reference/read_rds.html" class="external-link"><code>readr::write_rds()</code></a>).
This has helped our complicated investigations when multiple
statisticians frantically tackle overlapping aspects before a funder’s
deadline.</p>
<p>Essentially you are transferring security responsibilities from
REDCap to the file server. To balance its advantages, the approach’s
drawbacks include:</p>
<ul>
<li>extra effort is required to create, secure, and maintain a networked
drive that is accessible to only authorized analysts. This will take
15-60 minutes, depending on your institution.</li>
<li>extra effort is required to create an automated program to retrieve
and cache the dataset every night. See [CDS] for a head start.</li>
<li>REDCap’s logs will not support a meaningful audit because no human
is accessing the API. User access audits are now the responsibility of
the file system.</li>
</ul>
</div>
<div class="section level3">
<h3 id="caching-results-for-other-languages">Caching Results for other Languages<a class="anchor" aria-label="anchor" href="#caching-results-for-other-languages"></a>
</h3>
<p>Packages for other programming languages have been developed that
access REDCap’s API, such <a href="http://redcap-tools.github.io/PyCap/" class="external-link">PyCap</a> and <a href="https://github.com/iuredcap/phpcap" class="external-link">PhpCap</a>. Please see a more
complete list at <a href="https://redcap-tools.github.io/projects/" class="external-link uri">https://redcap-tools.github.io/projects/</a>. The caching
strategy described above may also benefit your investigation if:</p>
<ul>
<li><p>it uses a language like SAS that does not support packages. We
strongly discourage deploying loose scripts that call the API. When
something is fixed in the original script, it must be distributed by the
developer to the ~50 client institutions, then it must by copied to the
~100 projects within each institution. In contrast, when a developer
updates a package distributed through a repository like CRAN, the client
needs to run only <a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/update.packages.html" class="external-link"><code>base::update.packages()</code></a>
once per machine to update all its packages –not just REDCap packages.
Data scientists already do this regularly.</p></li>
<li><p>it uses a language like Julia that lacks a stable or updated
package. The REDCap developers are always releasing useful features
(<em>e.g.</em>, repeated measures) that improve the quality and
efficiency of your research. Leverage them.</p></li>
<li><p>your investigation incorporates multiple programming languages
and you would like the analysis team to use a consistent dataset. In
this scenario, we recommend the code save the same R dataset in multiple
file formats, such as a csv file and a feather file.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="session-information">Session Information<a class="anchor" aria-label="anchor" href="#session-information"></a>
</h2>
<p>For the sake of documentation and reproducibility, the current report
was rendered in the following environment. Click the line below to
expand.</p>
<details><summary>
Environment <span class="glyphicon glyphicon-plus-sign"></span>
</summary><pre><code><span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">─ Session info ───────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555; font-style: italic;">setting </span> <span style="color: #555555; font-style: italic;">value</span></span></span>
<span><span class="co">#&gt;  version  R version 4.4.2 (2024-10-31)</span></span>
<span><span class="co">#&gt;  os       macOS Sonoma 14.7.1</span></span>
<span><span class="co">#&gt;  system   aarch64, darwin20</span></span>
<span><span class="co">#&gt;  ui       X11</span></span>
<span><span class="co">#&gt;  language en</span></span>
<span><span class="co">#&gt;  collate  en_US.UTF-8</span></span>
<span><span class="co">#&gt;  ctype    en_US.UTF-8</span></span>
<span><span class="co">#&gt;  tz       UTC</span></span>
<span><span class="co">#&gt;  date     2024-12-08</span></span>
<span><span class="co">#&gt;  pandoc   3.1.11 @ /usr/local/bin/ (via rmarkdown)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">─ Packages ───────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555; font-style: italic;">package    </span> <span style="color: #555555; font-style: italic;">*</span> <span style="color: #555555; font-style: italic;">version   </span> <span style="color: #555555; font-style: italic;">date (UTC)</span> <span style="color: #555555; font-style: italic;">lib</span> <span style="color: #555555; font-style: italic;">source</span></span></span>
<span><span class="co">#&gt;  backports     1.5.0      <span style="color: #555555;">2024-05-23</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  bit           4.5.0.1    <span style="color: #555555;">2024-12-03</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  bit64         4.5.2      <span style="color: #555555;">2024-09-22</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  bslib         0.8.0      <span style="color: #555555;">2024-07-29</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  cachem        1.1.0      <span style="color: #555555;">2024-05-16</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  checkmate     2.3.2      <span style="color: #555555;">2024-07-29</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  cli           3.6.3      <span style="color: #555555;">2024-06-21</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  colorspace    2.1-1      <span style="color: #555555;">2024-07-26</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  crayon        1.5.3      <span style="color: #555555;">2024-06-20</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  curl          6.0.1      <span style="color: #555555;">2024-11-14</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  desc          1.4.3      <span style="color: #555555;">2023-12-10</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  digest        0.6.37     <span style="color: #555555;">2024-08-19</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  dplyr         1.1.4      <span style="color: #555555;">2023-11-17</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  evaluate      1.0.1      <span style="color: #555555;">2024-10-10</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  fansi         1.0.6      <span style="color: #555555;">2023-12-08</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  fastmap       1.2.0      <span style="color: #555555;">2024-05-15</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  fs            1.6.5      <span style="color: #555555;">2024-10-30</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  generics      0.1.3      <span style="color: #555555;">2022-07-05</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  glue          1.8.0      <span style="color: #555555;">2024-09-30</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  hms           1.1.3      <span style="color: #555555;">2023-03-21</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  htmltools     0.5.8.1    <span style="color: #555555;">2024-04-04</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  httr          1.4.7      <span style="color: #555555;">2023-08-15</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  jquerylib     0.1.4      <span style="color: #555555;">2021-04-26</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  jsonlite      1.8.9      <span style="color: #555555;">2024-09-20</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  kableExtra    1.4.0      <span style="color: #555555;">2024-01-24</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  knitr       * 1.49       <span style="color: #555555;">2024-11-08</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  lifecycle     1.0.4      <span style="color: #555555;">2023-11-07</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  magrittr    * 2.0.3      <span style="color: #555555;">2022-03-30</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  munsell       0.5.1      <span style="color: #555555;">2024-04-01</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  pillar        1.9.0      <span style="color: #555555;">2023-03-22</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  pkgconfig     2.0.3      <span style="color: #555555;">2019-09-22</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  pkgdown       2.1.1      <span style="color: #555555;">2024-09-17</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  purrr         1.0.2      <span style="color: #555555;">2023-08-10</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  R6            2.5.1      <span style="color: #555555;">2021-08-19</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  ragg          1.3.3      <span style="color: #555555;">2024-09-11</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  readr         2.1.5      <span style="color: #555555;">2024-01-10</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  REDCapR       <span style="color: #BB00BB; font-weight: bold;">1.3.0.9000</span> <span style="color: #555555;">2024-12-08</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">local</span></span></span>
<span><span class="co">#&gt;  rlang         1.1.4      <span style="color: #555555;">2024-06-04</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  rmarkdown     2.29       <span style="color: #555555;">2024-11-04</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  rstudioapi    0.17.1     <span style="color: #555555;">2024-10-22</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  sass          0.4.9      <span style="color: #555555;">2024-03-15</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  scales        1.3.0      <span style="color: #555555;">2023-11-28</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  sessioninfo   1.2.2      <span style="color: #555555;">2021-12-06</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  stringi       1.8.4      <span style="color: #555555;">2024-05-06</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  stringr       1.5.1      <span style="color: #555555;">2023-11-14</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  svglite       2.1.3      <span style="color: #555555;">2023-12-08</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  systemfonts   1.1.0      <span style="color: #555555;">2024-05-15</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  textshaping   0.4.1      <span style="color: #555555;">2024-12-06</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  tibble        3.2.1      <span style="color: #555555;">2023-03-20</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  tidyr         1.3.1      <span style="color: #555555;">2024-01-24</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  tidyselect    1.2.1      <span style="color: #555555;">2024-03-11</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  tzdb          0.4.0      <span style="color: #555555;">2023-05-12</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  utf8          1.2.4      <span style="color: #555555;">2023-10-22</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  vctrs         0.6.5      <span style="color: #555555;">2023-12-01</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  viridisLite   0.4.2      <span style="color: #555555;">2023-05-02</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  vroom         1.6.5      <span style="color: #555555;">2023-12-05</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  withr         3.0.2      <span style="color: #555555;">2024-10-28</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  xfun          0.49       <span style="color: #555555;">2024-10-31</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.1)</span></span></span>
<span><span class="co">#&gt;  xml2          1.3.6      <span style="color: #555555;">2023-12-04</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt;  yaml          2.3.10     <span style="color: #555555;">2024-07-26</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">CRAN (R 4.4.0)</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [1] /Users/runner/work/_temp/Library</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [2] /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">──────────────────────────────────────────────────────────────────────────────</span></span></span></code></pre>
</details>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Will Beasley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
