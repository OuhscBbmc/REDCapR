<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Typical REDCap Workflow for a Data Analyst • REDCapR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Typical REDCap Workflow for a Data Analyst">
<meta property="og:description" content="REDCapR">
<meta property="og:image" content="https://ouhscbbmc.github.io/REDCapR/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">REDCapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.9005</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/OuhscBbmc/REDCapR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Typical REDCap Workflow for a Data Analyst</h1>
                        <h4 data-toc-skip class="author">Will Beasley,
Geneva Marshall, &amp; Thomas Wilson, <a href="https://www.ouhsc.edu/bbmc/team/" class="external-link">Biomedical &amp; Behavior
Methodology Core</a>, OUHSC Pediatrics</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/OuhscBbmc/REDCapR/blob/HEAD/vignettes/workflow-read.Rmd" class="external-link"><code>vignettes/workflow-read.Rmd</code></a></small>
      <div class="hidden name"><code>workflow-read.Rmd</code></div>

    </div>

    
    
<p>The REDCap API facilitates repetitive tasks. If you’re sure you’ll
download and analyze a project only once, then it may make sense to
avoid the API and instead download a CSV through the browser.</p>
<p>But that single-shot scenario almost never happens in my life:</p>
<ol style="list-style-type: decimal">
<li>the patient dataset is updated with relevant &amp; fresh information
daily, or</li>
<li>you run it on a different computer a few months later, or <em>and
this is the heart of reproducibility:</em>
</li>
<li>you want someone else to be able to unambiguously &amp; effortlessly
produce the same analysis.</li>
</ol>
<p>Instead of telling your students or colleagues “first go to REDCap,
then go to project 55, then click”Data Exports”, then click “Export
Data”, then download these files, then move the files to this
subdirectory, and finally convert them to this format before you run
these models” …say it with a few lines of R code.</p>
<p>For people running your code on their machines …the API is so
integrated and responsive that they may not even realize their computer
is connecting to the outside world. If they’re not looking closely, they
may think it’s a dataset that’s included locally in a package they’ve
already installed.</p>
<p>For beginners, most of the work is related to passing security
credentials …which is something that is a reality of working with
PHI.</p>
<div class="section level2">
<h2 id="part-1---pre-requisites">Part 1 - Pre-requisites<a class="anchor" aria-label="anchor" href="#part-1---pre-requisites"></a>
</h2>
<div class="section level3">
<h3 id="verify-redcapr-is-installed">Verify REDCapR is installed<a class="anchor" aria-label="anchor" href="#verify-redcapr-is-installed"></a>
</h3>
<p>First confirm that the REDCapR package is installed on your local
machine. If not, the following line will throw the error
<code>Loading required namespace: REDCapR.  Failed with error: ‘there is no package called ‘REDCapR’’</code>.
If this call fails, follow the installation instructions on the <a href="https://ouhscbbmc.github.io/REDCapR/">REDCapR</a> webpage.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"REDCapR"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required namespace: REDCapR</span></span>
<span></span>
<span><span class="co"># If this fails, run `install.packages("REDCapR")` or `remotes::install_github(repo="OuhscBbmc/REDCapR")`</span></span></code></pre></div>
<p>If you’re a workshop attendee, you can use this vignette to copy
snippets of code to your local machine to follow along with the
examples: <a href="https://ouhscbbmc.github.io/REDCapR/articles/workflow-read.html" class="uri">https://ouhscbbmc.github.io/REDCapR/articles/workflow-read.html</a>.</p>
</div>
<div class="section level3">
<h3 id="verify-redcap-access">Verify REDCap Access<a class="anchor" aria-label="anchor" href="#verify-redcap-access"></a>
</h3>
<p>Check with your institution’s REDCap administrator to ensure you
have</p>
<ol style="list-style-type: decimal">
<li>access to the REDCap server,</li>
<li>access to the specific REDCap project, and</li>
<li>an API token with appropriate privileges to the specific REDCap
project.</li>
</ol>
<p>This might be the first time you’ve ever needed to request a token,
and your institution may have a formal process for API approval. Your
REDCap admin can help.</p>
<p>For this vignette, we’ll use a fake dataset hosted at
<code>https://bbmc.ouhsc.edu/redcap/api/</code> and accessible with the
token “9A81268476645C4E5F03428B8AC3AA7B”.</p>
<p>Note to REDCap Admins:</p>
<blockquote>
<p>For <a href="https://ouhscbbmc.github.io/REDCapR/reference/redcap_read.html"><code>REDCapR::redcap_read()</code></a>
to function properly, the user must have Export permissions for the
‘Full Data Set’. Users with only ‘De-Identified’ export privileges can
still use <a href="https://ouhscbbmc.github.io/REDCapR/reference/redcap_read_oneshot.html"><code>REDCapR::redcap_read_oneshot()</code></a>.
To grant the appropriate permissions:</p>
<ul>
<li>go to ‘User Rights’ in the REDCap project site,</li>
<li>select the desired user, and then select ‘Edit User
Privileges’,</li>
<li>in the ‘Data Exports’ radio buttons, select ‘Full Data Set’.</li>
</ul>
</blockquote>
</div>
<div class="section level3">
<h3 id="review-codebook">Review Codebook<a class="anchor" aria-label="anchor" href="#review-codebook"></a>
</h3>
<p>Before developing any REDCap or analysis code, spend at least 10
minutes to review the codebook, whose link is near the top left corner
of the REDCap project page, under the “Project Home and Design” heading.
Learning the details will save you time later and improve the quality of
the research.</p>
<p>If you’re new to the project, meet with the investigator for at least
30 minutes to learn the context, collection process, and idiosyncrasies
of the dataset. During that conversation, develop a plan for grooming
the dataset to be ready for analysis. This is part of the standard
advice that the analyst’s involvement should start early in the
investigation’s life span.</p>
</div>
</div>
<div class="section level2">
<h2 id="part-2---retrieve-protected-token">Part 2 - Retrieve Protected Token<a class="anchor" aria-label="anchor" href="#part-2---retrieve-protected-token"></a>
</h2>
<p>The REDCap API token is essentially a combination of a personal
password and the ID of the specific project you’re requesting data from.
Protect it like any other password to PHI (<a href="https://www.hhs.gov/answers/hipaa/what-is-phi/index.html" class="external-link">protected
health information</a>). For a project with PHI, <strong>never hard-code
the password directly in an R file</strong>. In other words, no PHI
project should be accessed with an R file that includes the line</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_secret_token</span> <span class="op">&lt;-</span> <span class="st">"9A81268476645C4E5F03428B8AC3AA7B"</span></span></code></pre></div>
<p>Instead, we suggest storing the token in a location that can be
accessed by only you. We have two recommendations.</p>
<div class="section level3">
<h3 id="security-method-1-token-file">Security Method 1: Token File<a class="anchor" aria-label="anchor" href="#security-method-1-token-file"></a>
</h3>
<p>The basic goals are (a) separate the secret values from the R file
into a dedicated file and (b) secure the dedicated file. If using a git
repository, prevent the file from being committed with an entry in <a href="https://docs.github.com/en/get-started/getting-started-with-git/ignoring-files" class="external-link"><code>.gitignore</code></a>.
Ask your institution’s IT security team for their recommendation.</p>
<p>The <a href="https://ouhscbbmc.github.io/REDCapR/reference/retrieve_credential.html"><code>retrieve_credential_local()</code></a>
function in the <a href="https://ouhscbbmc.github.io/REDCapR/">REDCapR</a> package loads
relevant information from a csv into R. The plain-text file might look
like this:</p>
<pre class="csv"><code>redcap_uri,username,project_id,token,comment
"https://bbmc.ouhsc.edu/redcap/api/","myusername",153,9A81268476645C4E5F03428B8AC3AA7B,"simple"
"https://bbmc.ouhsc.edu/redcap/api/","myusername",212,0434F0E9CF53ED0587847AB6E51DE762,"longitudinal"
"https://bbmc.ouhsc.edu/redcap/api/","myusername",213,D70F9ACD1EDD6F151C6EA78683944E98,"write data"</code></pre>
<p>To retrieve the credentials for the first project listed above, pass
the value of “153” to <code>project_id</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_credential</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"misc/example.credentials"</span>, package <span class="op">=</span> <span class="st">"REDCapR"</span><span class="op">)</span></span>
<span><span class="va">credential</span>  <span class="op">&lt;-</span> <span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/retrieve_credential.html">retrieve_credential_local</a></span><span class="op">(</span></span>
<span>  path_credential <span class="op">=</span> <span class="va">path_credential</span>,</span>
<span>  project_id      <span class="op">=</span> <span class="fl">153</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">credential</span></span>
<span><span class="co">#&gt; $redcap_uri</span></span>
<span><span class="co">#&gt; [1] "https://bbmc.ouhsc.edu/redcap/api/"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $username</span></span>
<span><span class="co">#&gt; [1] "myusername"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $project_id</span></span>
<span><span class="co">#&gt; [1] 153</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $token</span></span>
<span><span class="co">#&gt; [1] "9A81268476645C4E5F03428B8AC3AA7B"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $comment</span></span>
<span><span class="co">#&gt; [1] "simple static (read-only) test project"</span></span></code></pre></div>
<p>A credential file is already created for this vignette. In your next
real project, call <a href="https://ouhscbbmc.github.io/REDCapR/reference/retrieve_credential.html"><code>create_credential_local()</code></a>
to start a well-formed csv file that can contain tokens.</p>
<p>Compared to the method below, this one is less secure but easier to
establish.</p>
</div>
<div class="section level3">
<h3 id="security-method-2-token-server">Security Method 2: Token Server<a class="anchor" aria-label="anchor" href="#security-method-2-token-server"></a>
</h3>
<p>Our preferred method involves saving the tokens in a separate
database that uses something like Active Directory to authenticate
requests. This method is described in detail in the <a href="https://ouhscbbmc.github.io/REDCapR/articles/SecurityDatabase.html">Security
Database</a> vignette.</p>
<p>This approach realistically requires someone in your institution to
have at least basic database administration experience.</p>
</div>
</div>
<div class="section level2">
<h2 id="part-3---read-data-unstructured-approach">Part 3 - Read Data: Unstructured Approach<a class="anchor" aria-label="anchor" href="#part-3---read-data-unstructured-approach"></a>
</h2>
<p>The <code>redcap_uri</code> and <code>token</code> fields are the
only required arguments of <a href="https://ouhscbbmc.github.io/REDCapR/reference/redcap_read.html"><code>REDCapR::redcap_read()</code></a>;
both are in the credential object created in the previous section.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ds_1</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>    redcap_uri  <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>,</span>
<span>    token       <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt; 24 variable metadata records were read from REDCap in 0.3 seconds.  The http status code was 200.</span></span>
<span><span class="co">#&gt; The data dictionary describing 17 fields was read from REDCap in 0.1 seconds.  The http status code was 200.</span></span>
<span><span class="co">#&gt; 3 instrument metadata records were read from REDCap in 0.1 seconds.  The http status code was 200.</span></span>
<span><span class="co">#&gt; 1 rows were read from REDCap in 0.1 seconds.  The http status code was 200.</span></span>
<span><span class="co">#&gt; 2 data access groups were read from REDCap in 0.1 seconds.  The http status code was 200.</span></span>
<span><span class="co">#&gt; 5 records and 1 columns were read from REDCap in 0.1 seconds.  The http status code was 200.</span></span>
<span><span class="co">#&gt; Starting to read 5 records  at 2023-06-18 07:06:44.366533.</span></span>
<span><span class="co">#&gt; Reading batch 1 of 1, with subjects 1 through 5 (ie, 5 unique subject records).</span></span>
<span><span class="co">#&gt; 5 records and 25 columns were read from REDCap in 0.2 seconds.  The http status code was 200.</span></span></code></pre></div>
<p>At this point, the data.frame <code>ds_1</code> has everything you
need to start analyzing the project.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ds_1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 25</span></span></span>
<span><span class="co">#&gt;   record_id name_first name_last address  telephone email dob          age   sex</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>         1 Nutmeg     Nutmouse  <span style="color: #949494;">"</span>14 Ros… (405) 32… nutt… 2003-08-30    11     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>         2 Tumtum     Nutmouse  <span style="color: #949494;">"</span>14 Ros… (405) 32… tumm… 2003-03-10    11     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>         3 Marcus     Wood      <span style="color: #949494;">"</span>243 Hi… (405) 32… mw@m… 1934-04-09    80     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>         4 Trudy      DAG       <span style="color: #949494;">"</span>342 El… (405) 32… pero… 1952-11-02    61     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>         5 John Lee   Walker    <span style="color: #949494;">"</span>Hotel … (405) 32… left… 1955-04-15    59     1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16 more variables: demographics_complete &lt;dbl&gt;, height &lt;dbl&gt;, weight &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   bmi &lt;dbl&gt;, comments &lt;chr&gt;, mugshot &lt;chr&gt;, health_complete &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   race___1 &lt;dbl&gt;, race___2 &lt;dbl&gt;, race___3 &lt;dbl&gt;, race___4 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   race___5 &lt;dbl&gt;, race___6 &lt;dbl&gt;, ethnicity &lt;dbl&gt;, interpreter_needed &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   race_and_ethnicity_complete &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">ds_1</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code></pre></div>
<p><img src="workflow-read_files/figure-html/unstructured-2-1.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ds_1</span><span class="op">)</span></span>
<span><span class="co">#&gt;    record_id  name_first         name_last           address         </span></span>
<span><span class="co">#&gt;  Min.   :1   Length:5           Length:5           Length:5          </span></span>
<span><span class="co">#&gt;  1st Qu.:2   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Median :3   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Mean   :3                                                           </span></span>
<span><span class="co">#&gt;  3rd Qu.:4                                                           </span></span>
<span><span class="co">#&gt;  Max.   :5                                                           </span></span>
<span><span class="co">#&gt;                                                                      </span></span>
<span><span class="co">#&gt;   telephone            email                dob                  age      </span></span>
<span><span class="co">#&gt;  Length:5           Length:5           Min.   :1934-04-09   Min.   :11.0  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   1st Qu.:1952-11-02   1st Qu.:11.0  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Median :1955-04-15   Median :59.0  </span></span>
<span><span class="co">#&gt;                                        Mean   :1969-11-06   Mean   :44.4  </span></span>
<span><span class="co">#&gt;                                        3rd Qu.:2003-03-10   3rd Qu.:61.0  </span></span>
<span><span class="co">#&gt;                                        Max.   :2003-08-30   Max.   :80.0  </span></span>
<span><span class="co">#&gt;                                                                           </span></span>
<span><span class="co">#&gt;       sex      demographics_complete     height          weight   </span></span>
<span><span class="co">#&gt;  Min.   :0.0   Min.   :2             Min.   :  6.0   Min.   :  1  </span></span>
<span><span class="co">#&gt;  1st Qu.:0.0   1st Qu.:2             1st Qu.:  7.0   1st Qu.:  1  </span></span>
<span><span class="co">#&gt;  Median :1.0   Median :2             Median :165.0   Median : 54  </span></span>
<span><span class="co">#&gt;  Mean   :0.6   Mean   :2             Mean   :110.2   Mean   : 48  </span></span>
<span><span class="co">#&gt;  3rd Qu.:1.0   3rd Qu.:2             3rd Qu.:180.0   3rd Qu.: 80  </span></span>
<span><span class="co">#&gt;  Max.   :1.0   Max.   :2             Max.   :193.0   Max.   :104  </span></span>
<span><span class="co">#&gt;                                                                   </span></span>
<span><span class="co">#&gt;       bmi          comments           mugshot          health_complete</span></span>
<span><span class="co">#&gt;  Min.   : 19.8   Length:5           Length:5           Min.   :0      </span></span>
<span><span class="co">#&gt;  1st Qu.: 24.7   Class :character   Class :character   1st Qu.:0      </span></span>
<span><span class="co">#&gt;  Median : 27.9   Mode  :character   Mode  :character   Median :1      </span></span>
<span><span class="co">#&gt;  Mean   :110.9                                         Mean   :1      </span></span>
<span><span class="co">#&gt;  3rd Qu.:204.1                                         3rd Qu.:2      </span></span>
<span><span class="co">#&gt;  Max.   :277.8                                         Max.   :2      </span></span>
<span><span class="co">#&gt;                                                                       </span></span>
<span><span class="co">#&gt;     race___1      race___2      race___3      race___4      race___5  </span></span>
<span><span class="co">#&gt;  Min.   :0.0   Min.   :0.0   Min.   :0.0   Min.   :0.0   Min.   :0.0  </span></span>
<span><span class="co">#&gt;  1st Qu.:0.0   1st Qu.:0.0   1st Qu.:0.0   1st Qu.:0.0   1st Qu.:1.0  </span></span>
<span><span class="co">#&gt;  Median :0.0   Median :0.0   Median :0.0   Median :0.0   Median :1.0  </span></span>
<span><span class="co">#&gt;  Mean   :0.2   Mean   :0.2   Mean   :0.2   Mean   :0.2   Mean   :0.8  </span></span>
<span><span class="co">#&gt;  3rd Qu.:0.0   3rd Qu.:0.0   3rd Qu.:0.0   3rd Qu.:0.0   3rd Qu.:1.0  </span></span>
<span><span class="co">#&gt;  Max.   :1.0   Max.   :1.0   Max.   :1.0   Max.   :1.0   Max.   :1.0  </span></span>
<span><span class="co">#&gt;                                                                       </span></span>
<span><span class="co">#&gt;     race___6     ethnicity interpreter_needed race_and_ethnicity_complete</span></span>
<span><span class="co">#&gt;  Min.   :0.0   Min.   :0   Min.   :0.00       Min.   :0.0                </span></span>
<span><span class="co">#&gt;  1st Qu.:0.0   1st Qu.:1   1st Qu.:0.00       1st Qu.:2.0                </span></span>
<span><span class="co">#&gt;  Median :0.0   Median :1   Median :0.00       Median :2.0                </span></span>
<span><span class="co">#&gt;  Mean   :0.2   Mean   :1   Mean   :0.25       Mean   :1.6                </span></span>
<span><span class="co">#&gt;  3rd Qu.:0.0   3rd Qu.:1   3rd Qu.:0.25       3rd Qu.:2.0                </span></span>
<span><span class="co">#&gt;  Max.   :1.0   Max.   :2   Max.   :1.00       Max.   :2.0                </span></span>
<span><span class="co">#&gt;                            NA's   :1</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">age</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">bmi</span>, data <span class="op">=</span> <span class="va">ds_1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lm(formula = age ~ 1 + sex + bmi, data = ds_1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residuals:</span></span>
<span><span class="co">#&gt;       1       2       3       4       5 </span></span>
<span><span class="co">#&gt;  -2.491   1.954   9.132   2.491 -11.086 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)  </span></span>
<span><span class="co">#&gt; (Intercept) 63.34496    8.89980   7.118   0.0192 *</span></span>
<span><span class="co">#&gt; sex         13.55626    9.62958   1.408   0.2945  </span></span>
<span><span class="co">#&gt; bmi         -0.24426    0.04337  -5.632   0.0301 *</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual standard error: 10.55 on 2 degrees of freedom</span></span>
<span><span class="co">#&gt; Multiple R-squared:  0.9442, Adjusted R-squared:  0.8884 </span></span>
<span><span class="co">#&gt; F-statistic: 16.92 on 2 and 2 DF,  p-value: 0.05581</span></span></code></pre></div>
<p><em>Pause here in the workshop for a few minutes. Raise hand if
you’re having trouble.</em></p>
</div>
<div class="section level2">
<h2 id="part-4---read-data-choosing-columns-and-rows">Part 4 - Read Data: Choosing Columns and Rows<a class="anchor" aria-label="anchor" href="#part-4---read-data-choosing-columns-and-rows"></a>
</h2>
<p>When you read a dataset for the first time, you probably haven’t
decided which columns are needed so it makes sense to retrieve
everything. As you gain familiarity with the data and with the analytic
objectives, consider being more selective with the variables and rows
transported from the remote server to your local machine.</p>
<p>Advantages include:</p>
<ol style="list-style-type: decimal">
<li>A server is almost always more efficient filtering than a language
like R or Python.</li>
<li>REDCap’s PHP code retrieves less data from REDCap’s database and
translates less to a text format (like csv or json).</li>
<li>Fewer bytes are transmitted across your network.</li>
<li>Your local machine will have better performance, because R has a
smaller dataset to manage.</li>
<li>Your brain doesn’t have to look past unnecessary columns.</li>
<li>Your R code doesn’t have filter what the server already
removed.</li>
<li>Highly-sensitive PHI columns that are unnecessary for an analysis
remain on the server.</li>
</ol>
<div class="section level3">
<h3 id="specify-record-ids">Specify Record IDs<a class="anchor" aria-label="anchor" href="#specify-record-ids"></a>
</h3>
<p>The most basic operation to limit rows is passing the exact record
identifiers.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return only records with IDs of 1 and 4</span></span>
<span><span class="va">desired_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>  redcap_uri  <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>,</span>
<span>  token       <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span>,</span>
<span>  records     <span class="op">=</span> <span class="va">desired_records</span>,</span>
<span>  verbose     <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 25</span></span></span>
<span><span class="co">#&gt;   record_id name_first name_last address  telephone email dob          age   sex</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>         1 Nutmeg     Nutmouse  <span style="color: #949494;">"</span>14 Ros… (405) 32… nutt… 2003-08-30    11     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>         4 Trudy      DAG       <span style="color: #949494;">"</span>342 El… (405) 32… pero… 1952-11-02    61     0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16 more variables: demographics_complete &lt;dbl&gt;, height &lt;dbl&gt;, weight &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   bmi &lt;dbl&gt;, comments &lt;chr&gt;, mugshot &lt;chr&gt;, health_complete &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   race___1 &lt;dbl&gt;, race___2 &lt;dbl&gt;, race___3 &lt;dbl&gt;, race___4 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   race___5 &lt;dbl&gt;, race___6 &lt;dbl&gt;, ethnicity &lt;dbl&gt;, interpreter_needed &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   race_and_ethnicity_complete &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="specify-row-filter">Specify Row Filter<a class="anchor" aria-label="anchor" href="#specify-row-filter"></a>
</h3>
<p>A more useful operation to limit rows is passing an expression to
filter the records before returning. See your server’s documentation for
the syntax rules of the filter statements. Remember to enclose your
variable names in square brackets. Also be aware of differences between
strings and numbers.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return only records with a birth date after January 2003</span></span>
<span><span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>  redcap_uri    <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>,</span>
<span>  token         <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span>,</span>
<span>  filter_logic  <span class="op">=</span> <span class="st">"'2003-01-01' &lt; [dob]"</span>,</span>
<span>  verbose       <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 25</span></span></span>
<span><span class="co">#&gt;   record_id name_first name_last address  telephone email dob          age   sex</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>         1 Nutmeg     Nutmouse  <span style="color: #949494;">"</span>14 Ros… (405) 32… nutt… 2003-08-30    11     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>         2 Tumtum     Nutmouse  <span style="color: #949494;">"</span>14 Ros… (405) 32… tumm… 2003-03-10    11     1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16 more variables: demographics_complete &lt;dbl&gt;, height &lt;dbl&gt;, weight &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   bmi &lt;dbl&gt;, comments &lt;chr&gt;, mugshot &lt;chr&gt;, health_complete &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   race___1 &lt;dbl&gt;, race___2 &lt;dbl&gt;, race___3 &lt;dbl&gt;, race___4 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   race___5 &lt;dbl&gt;, race___6 &lt;dbl&gt;, ethnicity &lt;dbl&gt;, interpreter_needed &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   race_and_ethnicity_complete &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="specify-column-names">Specify Column Names<a class="anchor" aria-label="anchor" href="#specify-column-names"></a>
</h3>
<p>Limit the returned fields by passing a vector of the desired
names.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return only the fields record_id, name_first, and age</span></span>
<span><span class="va">desired_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"record_id"</span>, <span class="st">"name_first"</span>, <span class="st">"age"</span><span class="op">)</span></span>
<span><span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>  redcap_uri  <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>,</span>
<span>  token       <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span>,</span>
<span>  fields      <span class="op">=</span> <span class="va">desired_fields</span>,</span>
<span>  verbose     <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   record_id name_first   age</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>         1 Nutmeg        11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>         2 Tumtum        11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>         3 Marcus        80</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>         4 Trudy         61</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>         5 John Lee      59</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="part-5---read-data-structured-approach">Part 5 - Read Data: Structured Approach<a class="anchor" aria-label="anchor" href="#part-5---read-data-structured-approach"></a>
</h2>
<p>As the automation of your scripts matures and institutional resources
depend on its output, its output should be stable. One way to make it
more predictable is to specify the column names <em>and</em> the column
data types. In the previous example, notice that R (specifically <a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link"><code>readr::read_csv()</code></a>)
made its best guess and reported it in the “Column specification”
section.</p>
<p>In the following example, REDCapR passes <code>col_types</code> to <a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link"><code>readr::read_csv()</code></a>
as it converts the plain-text output returned from REDCap into an R data
frame. (To be precise, a <a href="https://tibble.tidyverse.org/" class="external-link">tibble</a> is returned.)</p>
<p>When readr sees a column with values like 1, 2, 3, and 4, it will
make the reasonable guess that the column should be a double precision
floating-point data type. However we <a href="https://ouhscbbmc.github.io/data-science-practices-1/coding.html#coding-simplify-types" class="external-link">recommend
using the simplest data type reasonable</a> because a simpler data type
is less likely contain unintended values and it’s typically faster,
consumes less memory, and translates more cleanly across platforms. As
specifically for identifiers like <code>record_id</code> specify either
an integer or character.</p>
<div class="section level3">
<h3 id="specify-column-names-types">Specify Column Names &amp; Types<a class="anchor" aria-label="anchor" href="#specify-column-names-types"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify the column types.</span></span>
<span><span class="va">desired_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"record_id"</span>, <span class="st">"race"</span><span class="op">)</span></span>
<span><span class="va">col_types</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols</a></span><span class="op">(</span></span>
<span>  record_id  <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  race___1   <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  race___2   <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  race___3   <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  race___4   <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  race___5   <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_logical</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  race___6   <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_logical</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>  redcap_uri  <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>,</span>
<span>  token       <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span>,</span>
<span>  fields      <span class="op">=</span> <span class="va">desired_fields</span>,</span>
<span>  verbose     <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  col_types   <span class="op">=</span> <span class="va">col_types</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 7</span></span></span>
<span><span class="co">#&gt;   record_id race___1 race___2 race___3 race___4 race___5 race___6</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>         1 FALSE    FALSE    FALSE    FALSE    TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>         2 FALSE    FALSE    TRUE     FALSE    TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>         3 FALSE    FALSE    FALSE    TRUE     TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>         4 FALSE    TRUE     FALSE    FALSE    TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>         5 TRUE     FALSE    FALSE    FALSE    FALSE    TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="specify-everything-is-a-character">Specify Everything is a Character<a class="anchor" aria-label="anchor" href="#specify-everything-is-a-character"></a>
</h3>
<p>REDCap internally stores every value as a string. To accept full
responsibility of the data types, tell <a href="https://readr.tidyverse.org/reference/cols.html" class="external-link"><code>readr::cols()</code></a>
to keep them as strings.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify the column types.</span></span>
<span><span class="va">desired_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"record_id"</span>, <span class="st">"race"</span><span class="op">)</span></span>
<span><span class="va">col_types</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols</a></span><span class="op">(</span>.default <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_character</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">REDCapR</span><span class="fu">::</span><span class="fu"><a href="../reference/redcap_read.html">redcap_read</a></span><span class="op">(</span></span>
<span>  redcap_uri  <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">redcap_uri</span>,</span>
<span>  token       <span class="op">=</span> <span class="va">credential</span><span class="op">$</span><span class="va">token</span>,</span>
<span>  fields      <span class="op">=</span> <span class="va">desired_fields</span>,</span>
<span>  verbose     <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  col_types   <span class="op">=</span> <span class="va">col_types</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 7</span></span></span>
<span><span class="co">#&gt;   record_id race___1 race___2 race___3 race___4 race___5 race___6</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1         0        0        0        0        1        0       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2         0        0        1        0        1        0       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3         0        0        0        1        1        0       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4         0        1        0        0        1        0       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5         1        0        0        0        0        1</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="part-6---next-steps">Part 6 - Next Steps<a class="anchor" aria-label="anchor" href="#part-6---next-steps"></a>
</h2>
<div class="section level3">
<h3 id="other-redcapr-resources">Other REDCapR Resources<a class="anchor" aria-label="anchor" href="#other-redcapr-resources"></a>
</h3>
<p>In addition to documentation <a href="https://ouhscbbmc.github.io/REDCapR/reference/">for each
function</a> the REDCapR package contains a handful of <a href="https://ouhscbbmc.github.io/REDCapR/articles/">vignettes</a>
including a <a href="https://ouhscbbmc.github.io/REDCapR/articles/TroubleshootingApiCalls.html">troubleshooting
guide</a>.</p>
</div>
<div class="section level3">
<h3 id="create-an-arch-for-reuse">Create an Arch for Reuse<a class="anchor" aria-label="anchor" href="#create-an-arch-for-reuse"></a>
</h3>
<p>When multiple R files use REDCapR call the same REDCap dataset,
consider refactoring your scripts so that extraction code is written
once, and called by the multiple analysis files. This “arch” pattern is
described in slides 9-16 of the 2014 <a href="https://projectredcap.org/about/redcapcon/" class="external-link">REDCapCon</a>
presentation, <a href="https://github.com/OuhscBbmc/RedcapExamplesAndPatterns/blob/master/Publications/Presentation-2014-09-REDCapCon/LiterateProgrammingPatternsAndPracticesWithREDCap.pptx" class="external-link">Literate
Programming Patterns and Practices for Continuous Quality Improvement
(CQI)</a>.</p>
</div>
<div class="section level3">
<h3 id="downstream-reproducible-reports">Downstream Reproducible Reports<a class="anchor" aria-label="anchor" href="#downstream-reproducible-reports"></a>
</h3>
<p>Once the dataset is in R, take advantage of all the reproducible
research tools available. Tomorrow, <a href="https://events.linuxfoundation.org/r-medicine/" class="external-link">R/Medicine</a> has
a workshop on this topic using the exciting new <a href="https://quarto.org/" class="external-link">Quarto</a> program that’s similar to R
Markdown. Also see the relevant <a href="https://www.youtube.com/playlist?list=PL4IzsxWztPdljYo7uE5G_R2PtYw3fUReo" class="external-link">R/Medicine
2020 presentation videos</a>. And of course, <a href="https://www.amazon.com/Yihui-Xie/e/B00E9CQJGY?ref=sr_ntt_srch_lnk_1&amp;qid=1625895927&amp;sr=1-1" class="external-link">any
book by Yihui Xie and colleagues</a>.</p>
</div>
<div class="section level3">
<h3 id="batching">Batching<a class="anchor" aria-label="anchor" href="#batching"></a>
</h3>
<p>By default, <code><a href="../reference/redcap_read.html">REDCapR::redcap_read()</a></code> requests datasets of
100 patients as a time, and stacks the resulting subsets together before
returning a data.frame. This can be adjusted to improve performance; the
‘Details’ section of <a href="https://ouhscbbmc.github.io/REDCapR/reference/redcap_read.html#details"><code>REDCapR::redcap_read()</code></a>
discusses the trade offs.</p>
</div>
<div class="section level3">
<h3 id="writing-to-the-server">Writing to the Server<a class="anchor" aria-label="anchor" href="#writing-to-the-server"></a>
</h3>
<p>Reading record data is only one API capability. REDCapR <a href="https://ouhscbbmc.github.io/REDCapR/reference/">exposes 20+ API
functions</a>, such as reading metadata, retrieving survey links, and
writing records back to REDCap. This last operation is relevant in <a href="https://twitter.com/kennethmclean92" class="external-link">Kenneth McLean</a>’s
presentation following a five-minute break.</p>
</div>
</div>
<div class="section level2">
<h2 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a>
</h2>
<p>This vignette was originally designed for a 2021 R/Medicine REDCap
workshop with <a href="https://www.med.umich.edu/higginslab/" class="external-link">Peter
Higgins</a>, <a href="https://coloradosph.cuanschutz.edu/resources/directory/directory-profile/Miller-Amanda-UCD6000053152" class="external-link">Amanda
Miller</a>, and <a href="https://twitter.com/kennethmclean92" class="external-link">Kenneth
McLean</a>.</p>
<p>This work was made possible in part by the NIH grant <a href="https://taggs.hhs.gov/Detail/AwardDetail?arg_AwardNum=U54GM104938&amp;arg_ProgOfficeCode=127" class="external-link">U54GM104938</a>
to the <a href="http://osctr.ouhsc.edu" class="external-link">Oklahoma Shared Clinical and
Translational Resource)</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Will Beasley.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'd672935e2d904316d6ee40239317764e',
    indexName: 'redcapr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
